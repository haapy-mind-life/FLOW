# 코드 문서 (수정 날짜: 2023-10-03)

## 프로젝트 개요

**Project Flow**는 사용자가 선택한 시간 동안 집중할 수 있도록 돕는 타이머 웹 애플리케이션입니다. 자연스러운 인터페이스와 배경 음악을 통해 편안한 환경을 제공합니다.

## 주요 기능

- **타이머 설정**: 싱잉볼, 5분, 15분, 30분, 연속 모드 중 선택 가능
- **싱잉볼 모드**: 배경 음악 없이 1분 후 종료 알람만 울림
- **배경 음악 재생**: 타이머 시작 시 배경 음악 페이드 인 (싱잉볼 모드 제외)
- **타이머 종료 후 동작**:
  - 배경 음악이 10초간 페이드 아웃 (싱잉볼 모드 제외)
  - 배경 음악이 완전히 종료된 후 알람 재생
  - 알람은 페이드 아웃 없이 재생
- **연속 모드 지원**:
  - 30분마다 알람이 울림
  - 알람 재생 후 배경 음악이 10초간 페이드 인하며 다시 재생

## 코드 상세 설명

### HTML 구조

- **타이머 선택 버튼**:
  - `<button>` 요소로 구성되며, 각 버튼은 `data-increment`와 `data-mode` 속성을 통해 모드를 구분
  - 싱잉볼 버튼은 `data-mode="singing-bowl"`로 설정되어 있으며, 1분 타이머로 작동
- **진행 바 및 시간 표시**:
  - SVG로 구현된 원형 진행 바를 사용하여 타이머의 진행 상태를 시각적으로 표시
  - 현재 남은 시간을 표시하는 `<p id="current-time">` 요소가 있음
- **오디오 요소**:
  - `id="background-music"`: 배경 음악 재생용 오디오 요소
  - `id="alarm-sound"`: 종료 알람 재생용 오디오 요소

### CSS 스타일링

- **전체 레이아웃**:
  - 자연을 연상시키는 그라데이션 배경과 중앙 정렬된 레이아웃으로 디자인
- **버튼 스타일**:
  - `.timer-option` 클래스는 공통 스타일을 정의
  - 각 모드별 버튼은 추가적인 클래스로 배경색과 스타일을 지정 (`.timer-singing-bowl`, `.timer-5min` 등)
- **진행 바 및 시간 표시**:
  - 원형 진행 바는 CSS를 통해 회전 및 애니메이션 효과를 부여
  - 남은 시간은 큰 글씨로 중앙에 표시

### JavaScript 기능

#### 변수 정의

- `buttons`: 모든 타이머 선택 버튼들을 담은 NodeList
- `currentTime`: 남은 시간을 표시하는 요소
- `circle`: 원형 진행 바의 `<circle>` 요소
- `music`: 배경 음악 오디오 요소
- `alarm`: 종료 알람 오디오 요소
- `FULL_DASH_ARRAY`: 원형 진행 바의 전체 둘레 길이
- `timeLeft`, `totalTime`: 타이머의 남은 시간과 총 시간 (초 단위)
- `interval`: `setInterval`의 ID를 저장하여 타이머를 제어
- `isContinuousMode`: 연속 모드 여부를 판단하는 불리언 값
- `isSingingBowlMode`: 싱잉볼 모드 여부를 판단하는 불리언 값

#### 함수 설명

- `fadeOutAudio(audioElement, duration, callback)`:
  - 오디오 요소를 지정된 시간(`duration`) 동안 점점 볼륨을 줄여 페이드 아웃
  - 페이드 아웃이 완료되면 오디오를 정지하고, 콜백 함수 호출
- `fadeInAudio(audioElement, duration, callback)`:
  - 오디오 요소를 지정된 시간 동안 점점 볼륨을 높여 페이드 인
  - 오디오를 재생하고, 페이드 인이 완료되면 콜백 함수 호출
- `updateCircleProgress(percentage)`:
  - 원형 진행 바의 진행 상태를 업데이트
  - `percentage`에 따라 `stroke-dashoffset`을 조정하여 진행도를 표시
- `timerEnd()`:
  - 타이머가 종료되었을 때 호출되는 함수
  - 싱잉볼 모드인 경우 바로 알람을 재생
  - 그 외 모드에서는 배경 음악을 10초간 페이드 아웃한 후 알람 재생
  - 연속 모드인 경우 알람 종료 후 배경 음악을 10초간 페이드 인하며 타이머 재시작
- `timerTick()`:
  - 1초마다 호출되어 타이머를 업데이트
  - 남은 시간을 감소시키고, 진행 바와 시간 표시를 업데이트
  - 시간이 다 되면 `timerEnd()`를 호출
- `startTimer(seconds)`:
  - 선택된 모드에 따라 타이머를 초기화하고 시작
  - 싱잉볼 모드에서는 배경 음악을 재생하지 않음
  - 연속 모드와 일반 모드에 따라 초기 설정이 다름

#### 이벤트 리스너

- 각 버튼에 클릭 이벤트를 추가하여 해당 모드의 타이머를 시작
- 버튼 클릭 시 다른 버튼들의 활성화 상태를 해제하고, 선택된 버튼을 활성화
- `data-increment`와 `data-mode` 속성을 통해 타이머 시간을 설정

## 수정 내역

- **2023-10-03**:

  - 싱잉볼 버튼 추가 및 관련 기능 구현
    - 싱잉볼 모드에서는 배경 음악을 재생하지 않고, 1분 후 알람만 울림
  - 종료 알람의 페이드 아웃 기능 제거
  - 배경 음악의 페이드 아웃 및 페이드 인 시간 조정 (10초)
  - 코드 문서에 수정 날짜 추가

---

# UX 문서 (수정 날짜: 2023-10-03)

## 프로젝트 개요

**Project Flow**는 사용자들이 집중하고자 하는 시간 동안 편안한 분위기에서 몰입할 수 있도록 돕는 타이머 웹 애플리케이션입니다. 자연을 연상시키는 디자인과 배경 음악을 통해 사용자 경험을 향상시킵니다.

## 사용자 인터페이스 설명

### 메인 화면 구성

- **헤더**:
  - 사이트의 타이틀인 "Project Flow"를 표시
- **타이머 선택 영역**:
  - 총 5개의 타이머 선택 버튼이 가로로 배열되어 있음
    - **싱잉볼 모드 (🔔)**:
      - 금색 계열의 배경색을 가진 버튼
      - 배경 음악 없이 1분 후 종료 알람만 울림
    - **5분 모드 (🌱)**:
      - 새싹 이모지와 연한 녹색 배경
    - **15분 모드 (🌳)**:
      - 나무 이모지와 노란색 계열 배경
    - **30분 모드 (🌲)**:
      - 숲 이모지와 주황색 계열 배경
    - **연속 모드 (♾️)**:
      - 무한대 이모지와 진한 녹색 배경
- **타이머 진행 영역**:
  - 중앙에 원형 진행 바가 위치하여 타이머의 진행 상태를 시각적으로 표시
  - 진행 바의 중앙에는 남은 시간이 표시됨
- **푸터**:
  - 배경 음악의 출처와 저작권 정보를 표시

## 사용자 흐름

1. **타이머 선택**:
   - 사용자는 원하는 시간의 타이머 버튼을 클릭하여 타이머를 시작
   - 선택된 버튼은 활성화 상태로 표시되며, 다른 버튼들은 비활성화
2. **타이머 진행**:
   - 선택된 시간에 따라 타이머가 시작되고, 진행 바와 남은 시간이 업데이트됨
   - 싱잉볼 모드를 제외한 다른 모드에서는 배경 음악이 페이드 인하며 재생
3. **타이머 종료 시 동작**:
   - **싱잉볼 모드**:
     - 배경 음악 없이 1분 후 종료 알람이 울림
   - **일반 모드 (5분, 15분, 30분)**:
     - 타이머 종료 10초 전에 배경 음악이 페이드 아웃 시작
     - 배경 음악이 완전히 종료되면 알람이 재생
   - **연속 모드**:
     - 타이머 종료 10초 전에 배경 음악이 페이드 아웃 시작
     - 배경 음악이 완전히 종료되면 알람이 재생
     - 알람 재생 후 배경 음악이 10초간 페이드 인하며 재생 재개
     - 타이머가 다시 30분으로 설정되어 반복 진행
4. **알람 종료 후**:
   - 알람은 페이드 아웃 없이 재생되며, 종료 후에는 별도의 동작이 없음
   - 연속 모드인 경우 배경 음악이 다시 페이드 인하며 타이머가 재시작

## 디자인 요소

- **색상 및 테마**:
  - 자연을 연상시키는 그라데이션 배경을 사용하여 편안한 분위기 조성
  - 각 버튼은 컨셉에 맞는 이모지와 색상을 사용하여 직관적으로 구분 가능
- **사용성**:
  - 버튼의 크기와 간격을 적절히 조절하여 모바일 환경에서도 쉽게 클릭 가능
  - 진행 바와 남은 시간을 시각적으로 제공하여 현재 상태를 쉽게 파악 가능
- **음악 및 사운드**:
  - 배경 음악은 자연의 분위기를 느낄 수 있는 편안한 음악을 사용
  - 종료 알람은 명확하게 들을 수 있도록 설정

## 수정 내역

- **2023-10-03**:

  - 싱잉볼 모드 추가
    - 배경 음악 없이 1분 타이머와 종료 알람만 제공
  - 종료 알람의 페이드 아웃 기능 제거로 명확한 알림 제공
  - 배경 음악의 페이드 아웃 및 페이드 인 시간을 10초로 조정하여 자연스러운 전환 제공
  - UX 문서에 수정 날짜 추가

---